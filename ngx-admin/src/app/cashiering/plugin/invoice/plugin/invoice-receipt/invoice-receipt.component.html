<div class="transaction-item flexbox flexbox-column {{ class }}">
  <div class="flexbox flexbox-column overflow-auto">
    <table class="table item-data">
      <thead>
        <tr>
          <th></th>
          <th>Kode</th>
          <th>Nama Barang</th>
          <th colspan="2" style="text-align: center;">Diskon</th>
          <th style="text-align: right;">Qty</th>
          <th style="text-align: right;">Harga</th>
          <th style="text-align: right;">Total</th>
        </tr>
      </thead>
      <tbody *ngIf="!hasData()">
        <tr>
          <td colspan="8">Tidak ada data.</td>
        </tr>
      </tbody>
      <tbody *ngIf="hasData()">
        <tr *ngIf="compliments.length>0" class="subtitle">
          <td colspan="8">Bonus</td>
        </tr>
        <tr *ngFor="let item of compliments; let i = index">
          <td (click)="delete(item.type, item.itemId)" [class.delete]="enabled"></td>
          <td>{{item.code}}</td>
          <td>{{item.name}}</td>
          <td class="discount-nominal form-control-container">
            <input-currency (onFocusout)="triggerChangesAction()"
              [(model)]="item.itemDisc"
              [allowNegative]="false"
              [class]="'form-control-small monospace'"
              [class]="'form-control-small'"
              [disabled]="true"
              [fractionSizeDisplay]="2"
              [max]="item.priceMirror"
              [min]="0">
            </input-currency>
          </td>
          <td class="discount-percentage form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="item.itemDiscPercent"
              [allowNegative]="false"
              [class]="'form-control-small monospace'"
              [disabled]="true"
              [fractionSizeDisplay]="2"
              [max]="100"
              [min]="0">
            </input-currency>
          </td>
          <td class="qty">
            <input (keyup)="triggerChangesAction()" [(ngModel)]="item.qty" [attr.disabled]="!enabled || null"
              class="form-control-small" min="1" name="qty">
          </td>
          <td class="price form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="item.priceCal"
              [class]="'form-control-small monospace'"
              [disabled]="true"
              [fractionSizeDisplay]="2"
            >
            </input-currency>
          </td>
          <td class="total form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="item.subTotal"
              [class]="'form-control-small monospace'"
              [disabled]="true"
              [fractionSizeDisplay]="2">
            </input-currency>
          </td>
        </tr>
        <tr *ngIf="products.length>0" class="subtitle">
          <td colspan="8">Produk</td>
        </tr>
        <tr *ngFor="let product of products; let i = index">
          <td (click)="delete(product.type, product.itemId)" [class.delete]="enabled"></td>
          <td>{{product.code}}</td>
          <td>{{product.name}}</td>
          <td class="discount-nominal form-control-container">
            <input-currency (onFocusout)="triggerChangesAction()"
              [(model)]="product.itemDisc"
              [allowNegative]="false"
              [class]="'form-control-small'"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2"
              [max]="product.priceMirror"
              [min]="0">
            </input-currency>
          </td>
          <td class="discount-percentage form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="product.itemDiscPercent"
              [allowNegative]="false"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2"
              [max]="100"
              [min]="0">
            </input-currency>
          </td>
          <td class="qty">
            <input (keyup)="triggerChangesAction()" [(ngModel)]="product.qty" [attr.disabled]="!enabled || null"
              class="form-control-small" min="1" name="qty">
          </td>
          <td class="price form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="product.priceCal"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2"
            >
            </input-currency>
          </td>
          <td class="total form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="product.subTotal"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2">
            </input-currency>
          </td>
        </tr>
        <tr *ngIf="services.length>0" class="subtitle">
          <td colspan="8">Layanan</td>
        </tr>
        <tr *ngFor="let item of services; let i = index">
          <td (click)="delete(item.type, item.itemId)" [class.delete]="enabled"></td>
          <td>{{item.code}}</td>
          <td>{{item.name}}</td>
          <td class="discount-nominal form-control-container">
            <input-currency (onFocusout)="triggerChangesAction()"
              [(model)]="item.itemDisc"
              [allowNegative]="false"
              [class]="'form-control-small monospace'"
              [class]="'form-control-small'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2"
              [max]="item.priceMirror"
              [min]="0">
            </input-currency>
          </td>
          <td class="discount-percentage form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="item.itemDiscPercent"
              [allowNegative]="false"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2"
              [max]="100"
              [min]="0">
            </input-currency>
          </td>
          <td class="qty">
            <input (keyup)="triggerChangesAction()" [(ngModel)]="item.qty" [attr.disabled]="!enabled || null"
              class="form-control-small" min="1" name="qty">
          </td>
          <td class="price form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="item.priceCal"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2"
            >
            </input-currency>
          </td>
          <td class="total form-control-container">
            <input-currency
              (onFocusout)="triggerChangesAction()"
              [(model)]="item.subTotal"
              [class]="'form-control-small monospace'"
              [disabled]="!enabled"
              [fractionSizeDisplay]="2">
            </input-currency>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
